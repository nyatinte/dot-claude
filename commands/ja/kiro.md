---
allowed-tools: Bash(mkdir:*), Write(*.claude_workflow/*), Read(*.claude_workflow/*), Edit(*.claude_workflow/*), MultiEdit(*.claude_workflow/*), TodoWrite
denied-tools: Bash(rm -rf:*), Bash(sudo:*)
description: 複雑な開発タスクのための構造化された4段階ワークフローを実行
---

## コンテキスト

- タスク入力: $ARGUMENTS
- 作業ディレクトリ: `!pwd`
- ultrathink

## あなたのタスク

Kiroのドキュメント重視とCLAUDE.mdの体系的なアプローチを組み合わせた構造化された4段階ワークフローを実行する。

### フェーズ1: 要件定義

1. **ディレクトリ構造のセットアップ**:
   - `.claude_workflow/`ディレクトリが存在しない場合は作成
   - `.claude_workflow/complete.md`が存在する場合は参照

2. **要件ドキュメントの作成** `.claude_workflow/requirements.md`に:
   - タスク概要: $ARGUMENTS から
   - 目的と成功基準
   - 現状分析
   - 機能/非機能要件
   - 制約と前提条件
   - 確認のための質問

3. **確認を得る**: "要件定義フェーズが完了しました。内容を確認していただき、設計フェーズに進んでよろしいですか？"

### フェーズ2: 設計

1. **要件を読む**: 必ず`.claude_workflow/requirements.md`を読み込んでから開始

2. **設計ドキュメントの作成** `.claude_workflow/design.md`に:
   - アーキテクチャとコンポーネント構造
   - 技術選択とその根拠
   - データフローと相互作用
   - 潜在的な課題と緩和戦略

3. **確認を得る**: "設計フェーズが完了しました。内容を確認していただき、タスク化フェーズに進んでよろしいですか？"

### フェーズ3: タスク分解

1. **設計を読む**: 必ず`.claude_workflow/design.md`を読み込んでから開始

2. **タスクリストの作成** `.claude_workflow/tasks.md`に:
   - 依存関係を含む詳細なタスクリスト
   - 優先度と複雑さの見積もり
   - 各コンポーネントのテストアプローチ
   - ロールバック戦略

3. **確認を得る**: "タスク化フェーズが完了しました。実装計画を確認していただき、実行フェーズに進んでよろしいですか？"

### フェーズ4: 実行

1. **タスクを読む**: 必ず`.claude_workflow/tasks.md`を読み込んでから開始

2. **実装の実行**:
   - TodoWriteを使用してタスクの進捗を追跡
   - タスクを順次実行
   - `.claude_workflow/tasks.md`に進捗を更新
   - 各タスク完了を報告

3. **実行ルールに従う**:
   - 小さく、段階的な変更を行う
   - 進む前にエラーを解決
   - 並列タスク実行なし
   - 仕様を超えた機能なし

## 主要原則

- 各フェーズには明示的なユーザー承認が必要
- ドキュメントが真実の源
- 体系的なアプローチが品質を保証
- 計画と実行の明確な分離

## ユーザー追加指示

$ARGUMENTS