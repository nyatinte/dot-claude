---
allowed-tools: Read(*), Glob(**/*), Grep, Write(quiz-*.md), Bash(git diff:*), Bash(git diff HEAD:*)
denied-tools: Edit(*), MultiEdit(*), Bash(git push:*), Bash(rm:*)
description: セッション内容に基づいた理解度確認クイズを生成
---

## コンテキスト

- 現在のセッション内容を分析
- 現在の差分（ステージング含む）: `!git diff HEAD`
- 作業ディレクトリ: `!pwd`

## あなたのタスク

これまでの会話セッションの内容を分析し、ユーザーの理解度を確認するためのインタラクティブなクイズを生成する。

### 1. **セッション内容の分析**:

以下の要素を特定:
- 実装された主要な機能や変更
- 使用された技術的概念
- 行われた設計判断
- 解決された問題
- 学習すべき重要なポイント

### 2. **クイズの構成**:

`quiz-[timestamp].md`ファイルを作成し、以下の形式で5-7問の技術的に深いクイズを生成:

```markdown
# セッション理解度確認クイズ

## 今回のセッションの概要
[実施した作業の簡潔なまとめ、特に技術的な変更点を中心に]

---

## 問題1: コードリーディング - 実装の意図

以下は今回のセッションで変更/追加されたコードの一部です。このコードが解決しようとしている問題は何ですか？

```[言語]
[実際のセッションで扱ったコードの抜粋]
// 例: 
// before: allowed-tools: Write(*review-pr-*.md)
// after: allowed-tools: Write(review.md)
```

<details>
<summary>答えを見る</summary>

**解答**: [このコード変更の意図と解決される問題の詳細な説明]

**詳細解説**: 
- なぜこの変更が必要だったか
- 他の解決方法との比較
- この実装の利点と制約
</details>

---

## 問題2: アーキテクチャ理解

今回実装した[機能名]において、以下のディレクトリ構造を採用しました。なぜこの構造を選択したのでしょうか？

```
[実際のディレクトリ構造]
例:
commands/
├── address-review-pr.md
├── review.md
└── ja/
    ├── address-review-pr.md
    └── review.md
```

<details>
<summary>答えを見る</summary>

**解答**: 
1. [構造選択の理由1]
2. [構造選択の理由2]
3. [トレードオフの考慮]

**実装上の注意点**: [この構造を採用する際の技術的な考慮事項]
</details>

---

## 問題3: 差分分析

以下のgit diffから、この変更の本質的な目的を説明してください。また、潜在的な問題点があれば指摘してください。

```diff
[実際のセッションのgit diffから抜粋]
例:
-allowed-tools: Bash(git diff:*), Read(*), Write(*review-pr-*.md)
+allowed-tools: Bash(git diff:*), Bash(git diff --staged:*), Bash(git show:*), Read(*), Write(review.md)
+denied-tools: Edit(*), MultiEdit(*)
```

<details>
<summary>答えを見る</summary>

**変更の目的**: 
- [主目的の説明]
- [副次的な効果]

**潜在的な問題**: 
- [考えられる問題1とその対策]
- [考えられる問題2とその対策]
</details>

---

## 問題4: エラーパターン認識

今回のセッションで以下のようなパターンのコードが複数箇所で使用されています。このパターンの問題点と改善案を提示してください。

```[言語]
[繰り返し使用されているコードパターン]
例:
// 複数ファイルで同じような処理
if ($ARGUMENTS) {
  // process arguments
} else {
  // use default
}
```

<details>
<summary>答えを見る</summary>

**問題点**: 
1. [DRY原則の観点から]
2. [保守性の観点から]
3. [拡張性の観点から]

**改善案**: 
```[言語]
[リファクタリング後のコード例]
```
</details>

---

## 問題5: 実装判断の検証

今回のセッションで`[具体的な技術選択]`を採用しましたが、以下のシナリオではどのような問題が発生する可能性がありますか？

1. ユーザー数が100倍になった場合
2. 国際化対応が必要になった場合
3. CI/CD環境で実行する場合

<details>
<summary>答えを見る</summary>

**シナリオ別の課題**: 

1. **スケーラビリティ**: [具体的な問題と対策]
2. **国際化**: [具体的な問題と対策]
3. **自動化環境**: [具体的な問題と対策]

**推奨される対応**: [将来を見据えた実装の改善案]
</details>

---

## 問題6: セキュリティ考察

今回の実装で設定した権限（allowed-tools/denied-tools）について、なぜ特定のツールを制限したのか、セキュリティの観点から説明してください。

```yaml
denied-tools: Bash(git push:*), Edit(*), MultiEdit(*)
```

<details>
<summary>答えを見る</summary>

**セキュリティ上の理由**: 
1. [各制限の具体的な理由]
2. [想定される攻撃シナリオ]
3. [権限設計の原則]

**ベストプラクティス**: [権限設計における一般的な指針]
</details>

---

## 深掘り課題

今回のセッションを踏まえて、以下について考察してください：

1. **代替実装**: 同じ問題を解決する別のアプローチを1つ提案し、メリット・デメリットを比較してください
2. **テスト戦略**: この実装をテストする際の重要なテストケースを3つ挙げてください
3. **パフォーマンス**: 現在の実装でボトルネックになりそうな箇所とその改善案

```

### 3. **クイズ生成の原則**:

- **高難易度**: コードを深く読み込まないと答えられない問題設定
- **実践的**: 実際のコード差分やアーキテクチャ判断に基づく
- **批判的思考**: 実装の問題点や改善案を考えさせる
- **多角的視点**: セキュリティ、パフォーマンス、保守性など様々な観点
- **具体的**: 抽象論ではなく実際のコードに基づいた議論

### 4. **効果的な学習のための工夫**:

- コードリーディング力: 実際のコードを読み解く力を養う
- 問題発見能力: コードの問題点や改善点を見つける訓練
- 設計思考: なぜその実装を選んだかを深く考察
- 実務応用: 現実の開発現場で直面する課題への対応

### 5. **クイズ後のフォローアップ**:

クイズ終了後、以下を提示:
- 各問題の深掘り解説
- 実際のコード改善例
- 類似の課題へのアプローチ方法
- 次回セッションで意識すべきポイント

## ユーザー追加指示

$ARGUMENTS